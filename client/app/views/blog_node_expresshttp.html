<div id="blog_node_expresshttp">
	<div class="box">
		<hr>
		<h2 class="intro-text text-center">
		Using Express as http <strong>server</strong>
		<img src="images/nodejs.png">
		</h2>
		<hr>

		<h1>App.js</h1>
		<pre class="">
			<code class="">
			var express = require('express');
			var favicon = require('serve-favicon');
			var logger = require('morgan');
			var cookieParser = require('cookie-parser');
			var bodyParser = require('body-parser');
			var app = express();
			var router = express.Router();
			var mongoose = require("mongoose");
			var session      = require('express-session');
			var http = require('http');
			var api = express();
			
			app.use(bodyParser.json());
			app.use(bodyParser.urlencoded({ extended: false }));
			app.use(cookieParser());
			
			/**
			* Development Settings
			*/
			if (app.get('env') === 'development') {
			
				// This will change in production since we'll be using the dist folder
				app.use(express.static(path.join(__dirname, '../client')));
				// This covers serving up the index page
				app.use(express.static(path.join(__dirname, '../client/.tmp')));
				app.use(express.static(path.join(__dirname, '../client/app')));
				
				
				// Error Handling
				app.use(function(err, req, res, next) {
					res.status(err.status || 500);
					res.render('error', {
						message: err.message,
						error: err
					});
				});
			}
			
			/**
			* Production Settings
			*/
			if (app.get('env') === 'production') {
			
				// changes it to use the optimized version for production
				app.use(express.static(path.join(__dirname, '/dist')));
				
				// production error handler
				// no stacktraces leaked to user
				app.use(function(err, req, res, next) {
					res.status(err.status || 500);
					res.render('error', {
						message: err.message,
						error: {}
					});
				});
			}
			
			// add static files serving for server side styles
			app.use(express.static(path.join(__dirname, '/styles/css')));
			
			// add static files serving for server side bower_components
			app.use(express.static(path.join(__dirname, '/bower_components')));
			
			// add static files serving for server side scripts
			app.use(express.static(path.join(__dirname, '/scripts')));
			
			
			/**
			* Routes
			*/
			require('./routes/routes')(router, passport, mongoose);
			app.use(router);
			
			module.exports = appÂ§;
			</code>
		</pre>
		
		<h1>bin/www</h1>
		<pre>
			<code>
			#!/usr/bin/env node
			var debug = require('debug')('server');
			var app = require('../app');
		
			app.set('port', process.env.PORT || 3000);
		
			var server = app.listen(app.get('port'), function() {
			  debug('Express server listening on port ' + server.address().port);
			});
		
			</code>
		</pre>
	</div>
</div>